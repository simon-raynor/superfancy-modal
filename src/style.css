@import url(./button.css);
@import url(./properties.css);

@media (prefers-reduced-motion: reduce) {
    * {
        transition-duration: .00001s !important;
        animation-duration: .00001s !important;
    }
}

:root {
    --cx: 100dvw;
    --cy: 100dvh;

    --duration: 1s;

    /* thanks SO https://stackoverflow.com/questions/29786230/how-to-create-css-bounce-effect */
    --easing-bounce: linear(
        0, 0.004, 0.016, 0.035, 0.063, 0.098, 0.141 13.6%, 0.25, 0.391, 0.563, 0.765,
        1, 0.891 40.9%, 0.848, 0.813, 0.785, 0.766, 0.754, 0.75, 0.754, 0.766, 0.785,
        0.813, 0.848, 0.891 68.2%, 1 72.7%, 0.973, 0.953, 0.941, 0.938, 0.941, 0.953,
        0.973, 1, 0.988, 0.984, 0.988, 1
    );

    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

body {
    max-width: 45em;
    margin-inline: auto;
    padding-inline: 1em;
}


.modal {
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;

    display: grid;
    align-content: center;
    justify-content: center;

    visibility: hidden;
    pointer-events: none;

    transition-property: none;
    transition-duration: calc(var(--duration) / 2);
    transition-timing-function: ease-in-out;
}

.modal.active {
    visibility: visible;
}

.modal.open {
    pointer-events: all;
    transition-duration: var(--duration);
}

.modal > div {
    opacity: var(--opacity-fg);

    background: #ffffffaa;
    padding: 1.5em 1.5em 2em;
    margin: 1em;
    max-width: 35em;
}

h2 {
    margin: 0;
}


.basic {
    --duration: .667s;
    --radius-pct: 0%;
    --opacity-fg: 0;

    transition-property: --radius-pct, --opacity-fg;
    transition-timing-function: ease-out;

    background-color: #443355dd;
    backdrop-filter: blur(.5em);

    mask: radial-gradient(circle farthest-corner
        at var(--evtx-out) var(--evty-out),
        transparent,
        transparent calc(100% - var(--radius-pct)),
        black calc(100% - var(--radius-pct))
    );
}

.basic.open {
    --radius-pct: 100%;
    --opacity-fg: 1;

    mask: radial-gradient(circle farthest-corner
        at var(--evtx-in) var(--evty-in),
        black,
        black var(--radius-pct),
        transparent var(--radius-pct)
    );
}


.orbit {
    --duration: .667s;
    --radius: 0;
    --radius-pct: 0%;
    --theta: 0deg;
    --cx: var(--evtx-in);
    --cy: var(--evty-in);

    transition-property: --radius, --radius-pct, --theta, --opacity-fg;
    transition-timing-function: ease-in, ease-out, ease-out, ease-in;

    --x1: calc(var(--cx) + (cos(270deg - var(--theta)) * (180dvmax - var(--radius))));
    --y1: calc(var(--cy) + (sin(270deg - var(--theta)) * (180dvmax - var(--radius))));
    --x2: calc(var(--cx) + (cos(270deg - var(--theta) + 180deg) * (180dvmax - var(--radius))) * .8);
    --y2: calc(var(--cy) + (sin(270deg - var(--theta) + 180deg) * (180dvmax - var(--radius))) * .8);

    background-image: radial-gradient(circle calc(var(--radius) * 1.5)
        at var(--x1) var(--y1)
        , #ffaa44aa
        , #ff8844aa
        , #ff4466aa calc(var(--radius-pct) * .75)
        , transparent var(--radius-pct)
    ), radial-gradient(circle calc(var(--radius) * 1.5)
        at var(--x2) var(--y2)
        , #ffaa44aa
        , #ff8844aa
        , #ff4466aa calc(var(--radius-pct) * .75)
        , transparent var(--radius-pct)
    );
    mask: radial-gradient(circle calc(var(--radius) * 1.5)
        at var(--x1) var(--y1)
        , black
        , black calc(var(--radius-pct) * .75)
        , transparent var(--radius-pct)
    )
    , radial-gradient(circle calc(var(--radius) * 1.5)
        at var(--x2) var(--y2)
        , black
        , black calc(var(--radius-pct) * .75)
        , transparent var(--radius-pct)
    );

    backdrop-filter: blur(.5em);
}

.orbit.open {
    --radius: 90dvmax;
    --radius-pct: 100%;
    --theta: 135deg;
    --opacity-fg: 1;

    --x1: calc(var(--cx) + (cos(var(--theta)) * var(--radius)));
    --y1: calc(var(--cy) + (sin(var(--theta)) * var(--radius)));
    --x2: calc(var(--cx) + (cos(var(--theta) + 180deg) * var(--radius)) * .5);
    --y2: calc(var(--cy) + (sin(var(--theta) + 180deg) * var(--radius)) * .5);
}


.slam {
    --duration: .75s;
    --radius-pct: 0%;

    background: linear-gradient(
        45deg
        , #830d17cc
        , #dd2233cc
        , #830d17cc
    );
    backdrop-filter: blur(.5em);

    mask: linear-gradient(
        45deg
        , black
        , black var(--radius-pct)
        , transparent var(--radius-pct)
        , transparent calc(100% - var(--radius-pct))
        , black calc(100% - var(--radius-pct))
        , black
    );

    transition-property: --radius-pct, --opacity-fg;
    transition-timing-function: ease-out;
    transition-duration: calc(var(--duration) / 4);
}

.slam.open {
    transition-timing-function: var(--easing-bounce), ease-in;

    --opacity-fg: 1;
    --radius-pct: 50%;
}